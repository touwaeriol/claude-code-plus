var E=Object.defineProperty;var R=(r,e,s)=>e in r?E(r,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[e]=s;var h=(r,e,s)=>R(r,typeof e!="symbol"?e+"":e,s);import{d as B,r as d,o as S,c as p,a as g,b as l,e as _,n as F,t as y,w as O,v as L,f as M,F as N,g as k,h as D}from"./vendor-2quu_6il.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function s(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerPolicy&&(a.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?a.credentials="include":t.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(t){if(t.ep)return;t.ep=!0;const a=s(t);fetch(t.href,a)}})();class P{constructor(){h(this,"listeners",new Map);h(this,"isReady",!1);this.setupEventListener(),this.checkBridgeReady()}async waitForReady(){if(!this.isReady)return new Promise(e=>{window.__bridgeReady?(this.isReady=!0,e()):window.addEventListener("bridge-ready",()=>{this.isReady=!0,e()},{once:!0})})}checkBridgeReady(){window.__bridgeReady&&(this.isReady=!0)}setupEventListener(){window.addEventListener("ide-event",e=>{const{type:s,data:n}=e.detail,t=this.listeners.get(s);t&&t.forEach(a=>{try{a(n)}catch(u){console.error(`Error in event handler for ${s}:`,u)}})})}async query(e,s){await this.waitForReady();try{return await window.ideaBridge.query(e,s)}catch(n){return console.error(`Bridge query failed for ${e}:`,n),{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}on(e,s){this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(s)}off(e,s){var n;(n=this.listeners.get(e))==null||n.delete(s)}once(e,s){const n=t=>{s(t),this.off(e,n)};this.on(e,n)}}const c=new P,V={async getTheme(){return c.query("ide.getTheme")},async openFile(r,e,s){return c.query("ide.openFile",{filePath:r,line:e,column:s})},async showDiff(r,e,s){return c.query("ide.showDiff",{filePath:r,oldContent:e,newContent:s})}},m={async connect(r){return c.query("claude.connect",r)},async query(r){return c.query("claude.query",{message:r})},async interrupt(){return c.query("claude.interrupt")},async disconnect(){return c.query("claude.disconnect")},onMessage(r){c.on("claude.message",r)},onConnected(r){c.on("claude.connected",r)},onDisconnected(r){c.on("claude.disconnected",r)},onError(r){c.on("claude.error",e=>r(e.error))}},$={class:"app"},A={class:"section"},I=["disabled"],x={class:"section"},z={key:0,class:"code"},J={class:"section"},K={class:"input-group"},T=["disabled"],H={class:"messages"},U={class:"message-header"},j={class:"message-content"},G=B({__name:"App",setup(r){const e=d(!1),s=d(""),n=d(!1),t=d(null),a=d("Hello Claude!"),u=d([]),f=d(!1);S(async()=>{console.log("ðŸš€ Vue App mounted");try{await c.waitForReady(),e.value=!0,s.value="âœ… æ¡¥æŽ¥å·²å°±ç»ª",n.value=!0,console.log("âœ… Bridge is ready"),m.onMessage(o=>{console.log("ðŸ“¨ Received Claude message:",o),u.value.push({role:"assistant",content:JSON.stringify(o.message,null,2)})}),m.onError(o=>{console.error("âŒ Claude error:",o),u.value.push({role:"error",content:o})})}catch(o){s.value=`âŒ æ¡¥æŽ¥å¤±è´¥: ${o}`,n.value=!1,console.error("âŒ Bridge initialization failed:",o)}});async function b(){s.value="â³ æµ‹è¯•ä¸­...";try{const o=await c.query("test.ping",{timestamp:Date.now()});o.success?(s.value=`âœ… æ¡¥æŽ¥æ­£å¸¸: ${JSON.stringify(o.data)}`,n.value=!0):(s.value=`âŒ æ¡¥æŽ¥å¤±è´¥: ${o.error}`,n.value=!1)}catch(o){s.value=`âŒ å¼‚å¸¸: ${o}`,n.value=!1}}async function q(){try{const o=await V.getTheme();o.success?(t.value=o.data.theme,console.log("Theme:",t.value)):console.error("Failed to get theme:",o.error)}catch(o){console.error("Error getting theme:",o)}}async function w(){if(!a.value.trim()||f.value)return;f.value=!0;const o=a.value;try{u.value.push({role:"user",content:o});const i=await m.query(o);i.success||u.value.push({role:"error",content:i.error||"Failed to send message"}),a.value=""}catch(i){console.error("Error sending message:",i),u.value.push({role:"error",content:String(i)})}finally{f.value=!1}}return(o,i)=>(g(),p("div",$,[i[4]||(i[4]=l("h1",null,"Claude Code Plus - Vue Frontend POC",-1)),l("div",A,[i[1]||(i[1]=l("h2",null,"1. é€šä¿¡æ¡¥æŽ¥æµ‹è¯•",-1)),l("button",{onClick:b,disabled:!e.value}," æµ‹è¯•æ¡¥æŽ¥ ",8,I),s.value?(g(),p("div",{key:0,class:F(["status",{success:n.value,error:!n.value}])},y(s.value),3)):_("",!0)]),l("div",x,[i[2]||(i[2]=l("h2",null,"2. èŽ·å– IDE ä¸»é¢˜",-1)),l("button",{onClick:q},"èŽ·å–ä¸»é¢˜"),t.value?(g(),p("pre",z,y(JSON.stringify(t.value,null,2)),1)):_("",!0)]),l("div",J,[i[3]||(i[3]=l("h2",null,"3. Claude æ¶ˆæ¯æµ‹è¯•",-1)),l("div",K,[O(l("input",{"onUpdate:modelValue":i[0]||(i[0]=v=>a.value=v),placeholder:"è¾“å…¥æ¶ˆæ¯...",onKeydown:M(w,["enter"])},null,544),[[L,a.value]]),l("button",{onClick:w,disabled:f.value},y(f.value?"å‘é€ä¸­...":"å‘é€"),9,T)]),l("div",H,[(g(!0),p(N,null,k(u.value,(v,C)=>(g(),p("div",{key:C,class:"message"},[l("div",U,y(v.role),1),l("div",j,y(v.content),1)]))),128))])])]))}}),Q=(r,e)=>{const s=r.__vccOpts||r;for(const[n,t]of e)s[n]=t;return s},W=Q(G,[["__scopeId","data-v-cf174639"]]);console.log("ðŸš€ Initializing Vue application...");const X=D(W);X.mount("#app");console.log("âœ… Vue application mounted");
